<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Profile</title>
    <!-- Combined CSS for self-contained, responsive styling -->
    <link rel="stylesheet" href="/css/profile.css">
</head>
<body>
    <div class="profile-container">
        
        <div class="page-header">
            <a href="dashboard.html" class="back-arrow"> &lt; </a>
        </div>
        
        <h1 class="profile-heading">Personal Information</h1>
        
        <!-- DISPLAY MODE -->
        <div id="display-mode" class="profile-card">
            
            <ul class="info-list">
                
                <li class="info-item">
                    <div class="info-label-group">
                        <span class="item-icon">üë§</span>
                        <span class="info-label">Name</span>
                    </div>
                    <div class="info-value" id="display-name">Mohammed Abdullah</div>
                    <span class="action-arrow">&gt;</span>
                </li>

                <li class="info-item">
                    <div class="info-label-group">
                        <span class="item-icon">üìû</span>
                        <span class="info-label">Phone Number</span>
                    </div>
                    <div class="info-value" id="display-phone">+966 500 050 055</div>
                    <span class="action-arrow">&gt;</span>
                </li>

                <li class="info-item">
                    <div class="info-label-group">
                        <span class="item-icon">üìß</span>
                        <span class="info-label">Email</span>
                    </div>
                    <!-- Email is usually not editable -->
                    <div class="info-value" id="display-email">mohammed@kfupm.edu.sa</div>
                    <span class="action-arrow">&gt;</span>
                </li>
                
                <li class="info-item action-link">
                    <div class="info-label-group">
                        <span class="item-icon">üîí</span>
                        <span class="info-label">Change your password</span>
                    </div>
                    <span class="info-value action-arrow">&gt;</span>
                </li>

                <li class="info-item">
                    <div class="info-label-group">
                        <span class="item-icon">‚ôÇÔ∏è/‚ôÄÔ∏è</span>
                        <span class="info-label">Gender</span>
                    </div>
                    <div class="info-value" id="display-gender">Male</div>
                    <span class="action-arrow">&gt;</span>
                </li>
                
                <li class="info-item">
                    <div class="info-label-group">
                        <span class="item-icon">üéÇ</span>
                        <span class="info-label">Date of birth</span>
                    </div>
                    <div class="info-value" id="display-dob">11-05-2003</div>
                    <span class="action-arrow">&gt;</span>
                </li>

            </ul>
            
            <button id="edit-btn" class="btn-primary">Edit Profile</button>
        </div>
        
        <form id="edit-profile-form" class="profile-card">
            
            <div class="form-input-group">
                <label for="input-name">Name</label>
                <input type="text" id="input-name" required>
            </div>
            
            <div class="form-input-group">
                <label for="input-phone">Phone Number</label>
                <input type="tel" id="input-phone">
            </div>
            
            <div class="form-input-group">
                <label for="input-gender">Gender</label>
                <select id="input-gender">
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                    <option value="Other">Other</option>
                </select>
            </div>
            
            <div class="form-input-group">
                <label for="input-dob">Date of Birth</label>
                <input type="date" id="input-dob">
            </div>

            <button type="submit" class="btn-primary">Save Changes</button>
            <button type="button" id="cancel-btn" class="btn-primary" style="background-color: #ff4d4d; margin-top: 10px;">Cancel</button>

        </form>

    </div>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        const editBtn = document.getElementById('edit-btn');
        const cancelBtn = document.getElementById('cancel-btn');
        const displayMode = document.getElementById('display-mode');
        const editForm = document.getElementById('edit-profile-form');
        const saveForm = document.getElementById('edit-profile-form');

        let userData = {
            name: "Mohammed Abdullah",
            phone: "+966 500 050 055",
            email: "mohammed@kfupm.edu.sa",
            gender: "Male",
            dob: "2003-05-11" // YYYY-MM-DD for date input
        };
        
        function renderDisplayMode() {
            document.getElementById('display-name').textContent = userData.name;
            document.getElementById('display-phone').textContent = userData.phone;
            document.getElementById('display-email').textContent = userData.email;
            document.getElementById('display-gender').textContent = userData.gender;
            
            // Format DOB for display (DD-MM-YYYY)
            const [year, month, day] = userData.dob.split('-');
            document.getElementById('display-dob').textContent = `${day}-${month}-${year}`;

            // Switch views
            displayMode.style.display = 'block';
            editForm.style.display = 'none';
        }

        function openEditMode() {
            // Populate form fields with current data
            document.getElementById('input-name').value = userData.name;
            document.getElementById('input-phone').value = userData.phone;
            document.getElementById('input-gender').value = userData.gender;
            document.getElementById('input-dob').value = userData.dob;

            // Switch views
            displayMode.style.display = 'none';
            editForm.style.display = 'block';
        }
        
        function saveProfile(event) {
            event.preventDefault();

            // 1. Collect new data from the form
            const newName = document.getElementById('input-name').value.trim();
            const newPhone = document.getElementById('input-phone').value.trim();
            const newGender = document.getElementById('input-gender').value;
            const newDob = document.getElementById('input-dob').value;
            
            // 2. Update the local userData object (Simulated Save to Database)
            userData.name = newName;
            userData.phone = newPhone;
            userData.gender = newGender;
            userData.dob = newDob;

            // 3. Re-render the display mode
            renderDisplayMode();
        }

        // --- EVENT LISTENERS ---
        editBtn.addEventListener('click', openEditMode);
        cancelBtn.addEventListener('click', (e) => {
            e.preventDefault();
            renderDisplayMode(); // Just switch back to display mode
        });
        saveForm.addEventListener('submit', saveProfile);

        renderDisplayMode();
    </script>
</body>
</html>